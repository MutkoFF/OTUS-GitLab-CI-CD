## Введение в СI/CD

### Цели:
1) Приведите для каждого пункта ниже 3 практических примера из области разработки, эксплуатации, командного взаимодействия и т.п., когда:

CI/CD НЕ нужно или будет излишним.

CI/CD реально необходимо и решает какую-либо проблему.

2) Приведите 3 практических примера из сферы DevOps, когда не выстроен (плохо работает) один или несколько элементов жизненного цикла DevOps. Покажите, какие проблемы это влечет для остальных элементов жизненного цикла и DevOps-практик на проекте в целом. Опционально: объясните, что и как можно улучшить, чтобы решить проблему?

Меня зовут Дмитрий Овчинников, я NetOps инженер в компании, которая занимается разработкой отечественной системы бронирования авиабилетов, также по совместительству я работаю преподавателем в РЭУ им. Г.В. Плеханова. Ниже я приведу примеры, связанные с моими отраслями деятельности.

#### Ответы на первый вопрос:

**CI/CD НЕ нужно или будет излишним**

##### Пример 1. Разработка одноразового аналитического прототипа.

Команда разработчиков делает одноразовый прототип сервиса расчёта цен на авиабилеты (например, сравнение тарифов разных GDS). В этом случае:

• Код пишется быстро;

• Прототип запускается локально или в отдельной песочнице;

• Деплой не планируется в продакшен.

Поэтому настройка CI/CD (пайплайны, окружения, автоматический деплой) будет избыточной и не окупится.

##### Пример 2. Редкие ручные изменения конфигурации.

Например:

• Oбновление справочника аэропортов (IATA-коды);

• Изменение статического списка авиакомпаний-партнёров.

Изменения:

• Редкие;

• Выполняются вручную;

• Не требуют тестирования логики.

Следственно, Подключать CI/CD ради редких правок YAML/JSON-файлов - излишне.

##### Пример 3. Внутренний учебный или демонстрационный проект в институте.

В рамках своей дисциплины я могу дать студентам такое задание:

«Реализовать упрощённый сервис бронирования билета без реальной интеграции с авиакомпаниями»

• Проект живёт 2–3 недели;

• Нет реальных пользователей.

• Смысл задания, чтобы студенты подробно изучили ручной вариант развёртывания компонентов системы бронирования билетов для более детального понимания внутренних процессов.

CI/CD здесь не даёт бизнес-ценности, а лишь усложняет обучение.

**Когда CI/CD реально необходимо и решает проблему**

##### Пример 1. Частые изменения в логике бронирования билетов

В системе бронирования могут часто меняться правила возврата, добавляться новые тарифы, корректироваться логика расчёта багажа и допуслуг и т.д. 

Без CI/CD есть высокий риск сломать расчёт цены, а убытки авиакомпании возложат на мою компанию, а с CI/CD с помощью автотестов есть возможность проверить сценарии бронирования и реализовать деплой изменений быстро и безопасно. Таким образом, CI/CD снизит количество ошибок в критически важной бизнес-логике.

##### Пример 2. Командная работа над микросервисами

В системе бронирования есть отдельный сервис поиска рейсов, отдельный сервис оплаты, отдельный сервис бронирования и подтверждения и над каждым сервисом работают разные разработчики. 

CI/CD поможет автоматически собирать сервисы, проверять контракты API, деплоить сервисы независимо. Поэтому без CI/CD резко растёт количество конфликтов и сломанных интеграций между командами и компанентами бронирования.

##### Пример 3. Быстрое исправление инцидентов (откат) в продакшене

Например:

• Пользователи не могут оплатить билеты из-за ошибки интеграции с платёжным шлюзом;

• нужно срочно выкатить фикс.

Без CI/CD:

• Ручная сборка;

• Ручной деплой;

• Высокий риск человеческой ошибки в стрессовой ситуации.

С CI/CD:

• Фикс проходит тесты;

• Деплой происходит автоматически и быстро;

• Время простоя системы минимально.

#### Ответы на второй вопрос:

##### Пример 1. Отсутствие автоматизированного CI (некачественный этап Build & Test). 

**Ситуация**

Команда разрабатывает внутреннюю логику системы бронирования  (поиск рейсов, бронирование, оплата). 

Сборка и тестирование выполняются вручную:

• Разработчики запускают тесты локально;

• Интеграционные тесты с GDS не запускаются;

• Код мержится в main без обязательной проверки через CI.

**Какие проблемы возникают**

• В продакшн попадают ошибки в логике расчёта тарифов и сборов;

• Часто ломаются сценарии бронирования при изменении API внешних клиентов;

• Повышается количество hotfix-релизов.

**Влияние на другие элементы DevOps-цикла**

• Release: релизы становятся непредсказуемыми и задерживаются;

• Deploy: возрастает риск откатов;

• Operate: увеличивается количество инцидентов.

**Что можно улучшить**

Например, настроить CI-pipeline для автоматической сборки и сделать CI обязательным условием merge в основную ветку.

##### Пример 2. Плохая работа с инфраструктурой (нет Infrastructure as Code)

**Ситуация**

Инфраструктура системы бронирования разворачивается вручную, настройки окружений (dev / staging / prod) отличаются, часть конфигураций хранится в голове DevOps-инженера.

**Какие проблемы возникают**

• На staging всё работает, а в production — нет.

• Ошибки при масштабировании в пиковые периоды (распродажи авиабилетов).

• Восстановление после сбоя занимает часы.

**Влияние на другие элементы DevOps-цикла**

• Release: невозможность быстро развернуть новое окружение;

• Deploy: много времени требуется на восстановление;

• Plan: сложно планировать рост нагрузки.

**Что можно улучшить**

Внедрить Infrastructure as Code. Например, Terraform для инфраструктуры, Ansible / Helm для конфигураций.

##### Пример 3. Отсутствие мониторинга и обратной связи (плохо выстроен Monitor & Feedback)

**Ситуация**

Система бронирования запущена в продакшене, но:

• Нет метрик по успешным бронированиям;

• Ошибки API авиакомпаний логируются, но не анализируются.

**Какие проблемы возникают**

• Команда узнаёт о проблемах от клиентов или службы поддержки;

• Невозможно быстро понять, почему бронирование «падает» на этапе оплаты;

• Изменения в коде ухудшают пользовательский опыт, но это замечают слишком поздно.

**Влияние на другие элементы DevOps-цикла**

• Monitor: нет прозрачности состояния системы;

• Learn / Improve: команда не получает обратную связь;

• Plan: решения принимаются на догадках, а не на данных;

• Release: сложно оценить эффект от релиза.

**Что можно улучшить**

Внедрить мониторинг и алертинг: Prometheus + Grafana, бизнес-метрики бронирований. Ещё можно связать технические метрики с бизнес-показателями и Использовать данные мониторинга для ретроспектив и планирования.